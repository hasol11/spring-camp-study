<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="board">
<select id="count" resultType="int">
	select count(*) from board
</select>

<!-- b_groups 원 글이 같은 것끼리 -->
<select id="list" parameterType="map" resultType="com.ict.edu06.vo.BoardVO">
	select * from board order by b_groups desc, lev asc limit #{limit} offset #{offset}
</select>

<!-- b_groups 값을 b_idx의 최대값 +1로 설정 -->
<insert id="insert" parameterType="com.ict.edu06.vo.BoardVO">
	<selectKey>
		select(IFNULL(MAX(b_idx),0)+1) as b_groups from board
	</selectKey>
	insert into board(writer, title, content, pwd, hit, b_groups, step, lev, regdate, f_name)
	values(#{writer}, #{title}, #{content}, #{pwd}, 0 #{}, 0, 0, #{f_name} )
</insert>
</mapper>